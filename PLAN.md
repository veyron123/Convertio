# План по созданию интерактивного фронтенда

Этот документ описывает план по превращению статичной HTML-страницы в полнофункциональное веб-приложение для конвертации файлов.

## 1. Модификация HTML (`index.html`)

Необходимо внести следующие изменения в существующую структуру для добавления интерактивных элементов:

-   **Загрузка файла:** Превратить кнопку "Выбрать Файл" в настоящую кнопку загрузки, связав ее со скрытым полем `<input type="file">`.
-   **Выбор формата:** Добавить выпадающий список (`<select>`) рядом с кнопкой, чтобы пользователь мог выбрать целевой формат (например, `pdf`, `docx`, `png`).
-   **Отображение процесса:** Добавить секцию, где будет отображаться текущий статус конвертации (например, "Загрузка...", "Конвертируем...", "Готово!").
-   **Ссылка на скачивание:** Подготовить место, где появится ссылка на скачивание готового файла.

## 2. Создание логики на JavaScript (в новом файле `script.js`)

Вся интерактивная логика будет реализована в новом файле `script.js`. Этот скрипт будет выполнять следующие функции:

1.  **Слушать события:** Отслеживать клик по кнопке "Выбрать Файл".
2.  **Отправлять файл на сервер:** После выбора файла, отправлять его вместе с выбранным форматом на бэкенд (`POST /api/start-conversion`).
3.  **Отслеживать прогресс:** Периодически опрашивать бэкенд (`GET /api/conversion-status/:id`) для получения статуса конвертации.
4.  **Обновлять интерфейс:** Отображать актуальный статус конвертации для пользователя.
5.  **Показывать результат:** После успешной конвертации отображать ссылку для скачивания готового файла.

## 3. Схема взаимодействия

Диаграмма ниже иллюстрирует процесс взаимодействия между компонентами системы:

```mermaid
sequenceDiagram
    participant User as Пользователь
    participant Frontend as Фронтенд (браузер)
    participant Backend as Бэкенд (наш server.js)
    participant Convertio as Convertio API

    User->>Frontend: 1. Нажимает "Выбрать файл" и выбирает файл
    Frontend->>Backend: 2. Отправляет файл и формат (POST /api/start-conversion)
    Backend->>Convertio: 3. Пересылает запрос на старт конвертации
    Convertio-->>Backend: 4. Возвращает ID конвертации
    Backend-->>Frontend: 5. Возвращает ID конвертации
    Frontend->>User: 6. Показывает "Файл загружается..."

    loop Проверка статуса
        Frontend->>Backend: 7. Запрашивает статус (GET /api/conversion-status/:id)
        Backend->>Convertio: 8. Пересылает запрос статуса
        Convertio-->>Backend: 9. Возвращает текущий статус
        Backend-->>Frontend: 10. Возвращает текущий статус
        Frontend->>User: 11. Обновляет статус на странице
    end

    Note over Frontend,Convertio: Когда статус "finished"
    Frontend->>User: 12. Показывает ссылку на скачивание